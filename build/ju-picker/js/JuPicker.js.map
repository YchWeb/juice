{"version":3,"sources":["JuPicker.js"],"names":[],"mappings":"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","file":"JuPicker.js","sourcesContent":["/**\n * @name Component\n * @description main module\n * @author  Ziv\n * @date 2016/06/08\n */\n\nclass JuPicker {\n\n    constructor(element, options) {\n        this._initElement(element);\n        this._initOptions(options);\n        this._renderHTML();\n    }\n\n    _initElement(ele) {\n        if (ele) {\n            this.warpper = document.querySelector(ele);\n            this.warpper.addEventListener('click', () => {this._showPicker()});\n            this.warpper.addEventListener('touch', () => {this._showPicker()});\n        }\n        else {\n            throw new Error(\"The picker's selector is null.\");\n        }\n    }\n\n    _initInnerElement() {\n        \n        this.overlay = this.warpper.querySelector('.ju-picker-overlay');\n        this.content = this.warpper.querySelector('.ju-picker-content');\n        this.items = this.content.querySelector(\".ju-picker-items\");\n\n        this.overlay.addEventListener(\"click\", (evt) => {this._listenEvtOverlay(evt)});\n        this.overlay.addEventListener(\"touch\", (evt) => {this._listenEvtOverlay(evt)});\n        \n        // Listener for the button of done\n        let btnDone = this.content.querySelector('.ju-picker-done');\n        btnDone.addEventListener(\"click\", (evt) => {this._listenEvtOverlay(evt)});\n        btnDone.addEventListener(\"touch\", (evt) => {this._listenEvtOverlay(evt)});\n    }\n\n    _initOptions(options) {\n        this.options = {\n            \"title\": options.title || \"请选择\",\n            \"done\": options.done || \"完成\"\n        };\n    }\n\n    _showPicker() {\n        if (!this.display) {\n            this.display = true;\n            this.overlay.style.display = \"block\";\n            this.content.style.display = \"block\";\n            this.content.className = \"ju-picker-content ju-picker-show\";\n            this._initScroll(); // Init scroll After rendered HTML\n        }\n    }\n\n    _hidePicker() {\n        if (this.display) {\n            this.display = false;\n            this.content.className = \"ju-picker-content ju-picker-hide\";\n            this.overlay.style.display = \"none\";\n            let self = this;\n            setTimeout(function() {\n                self.content.style.display = \"none\";\n            }, 300)\n        }\n    }\n\n    _listenEvtOverlay(evt) {\n        this._hidePicker();\n        evt.preventDefault();\n        evt.stopPropagation();\n    }\n\n    _createPickerDom(items) {\n          return `\n              <div class=\"ju-picker-overlay\"></div>\n            <div class=\"ju-picker-content\">\n                <header>\n                    <span class=\"ju-picker-choose\">{{TITLE}}:</span>\n                    <span class=\"ju-picker-done\">{{DONE}}</span>\n                </header>\n                <main class=\"ju-picker-main\">\n                    <ul class=\"ju-picker-items\">\n                       \n                    </ul>\n                    <div class=\"ju-picker-indicator\"></div>\n                    <div class=\"ju-picker-mask\"></div>\n                </main>\n            </div>\n          `;\n    }\n\n    _renderHTML(data) {\n\n        var html = this._createPickerDom();\n        if (this.options.title) {\n            html = html.replace(\"{{TITLE}}\", this.options.title);\n        }\n\n        if (this.options.done) {\n            html = html.replace(\"{{DONE}}\", this.options.done);\n        }\n\n        this.warpper.innerHTML = this.warpper.innerHTML + html;\n        this._initInnerElement();\n    }\n\n    _renderData(data) {\n        var items = \"\";\n        for (var i = 0 ; i < data.length; i++) {\n            var li = '<li class=\"ps'+35*(i+1)+'\" data-value=\"' + data[i] + '\"><span>' + data[i] + '</span></li>';\n            items += li;\n        }\n        this.setCurrent(data[0]);\n        this.items.innerHTML = items;\n    }\n\n    _initScroll() {\n\n        let self = this;\n        let scroller = self.warpper.querySelector('.ju-picker-main');\n        let pickerScroll = new IScroll(scroller, {\n            probeType: 3\n        });\n\n        pickerScroll.on(\"scrollEnd\", function() {\n            let y = this.y;\n            let count = Math.round(Math.abs(y)/35);\n            let distance = -(count*35);\n\n            if ( y !== distance && y !== 0) {\n                pickerScroll.scrollTo(0, distance, pickerScroll.options.bounceTime, \n                    pickerScroll.options.bounceEasing);\n            }\n\n            let po = parseInt(Math.abs(distance)) + 35;\n            let selected = scroller.querySelector('.ps' + po);\n            if (selected) {\n                self.setCurrent(selected.getAttribute(\"data-value\"));\n            }\n        });\n    }\n\n    setCurrent(value) {\n        if (!this.selected) {\n            this.selected = this.warpper.querySelector(\".ju-picker-selected\");\n        }\n        this.selected.innerHTML = value;\n    }\n\n    getVal() {\n        return this.selected.innerHTML;\n    }\n\n    render(data) {\n        this._renderData(data);\n    }\n\n}"],"sourceRoot":"/source/"}