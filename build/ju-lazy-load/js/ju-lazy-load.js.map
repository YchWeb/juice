{"version":3,"names":[],"mappings":"","sources":["ju-lazy-load.js"],"sourcesContent":["\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @name JuLazyLoad\n * @description img lazy load component\n * @author  Ziv\n * @date 2016/06/08\n */\n\nvar JuLazyLoad = function () {\n\n    // constructor\n\n    function JuLazyLoad(element) {\n        _classCallCheck(this, JuLazyLoad);\n\n        this._preload = \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiBmaWxsPSJ3aGl0ZSI+CiAgPHBhdGggb3BhY2l0eT0iLjI1IiBkPSJNMTYgMCBBMTYgMTYgMCAwIDAgMTYgMzIgQTE2IDE2IDAgMCAwIDE2IDAgTTE2IDQgQTEyIDEyIDAgMCAxIDE2IDI4IEExMiAxMiAwIDAgMSAxNiA0Ii8+CiAgPHBhdGggZD0iTTE2IDAgQTE2IDE2IDAgMCAxIDMyIDE2IEwyOCAxNiBBMTIgMTIgMCAwIDAgMTYgNHoiPgogICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGZyb209IjAgMTYgMTYiIHRvPSIzNjAgMTYgMTYiIGR1cj0iMC44cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIC8+CiAgPC9wYXRoPgo8L3N2Zz4K\";\n\n        this._lazyMark = \"ju-img-src\";\n        this._images = (element ? document.querySelector(element).querySelectorAll('img[' + this._lazyMark + ']') : document.querySelectorAll('img[' + this._lazyMark + ']')) || [];\n\n        this._viewPortHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n        this._viewPortWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n\n        this._initOnload();\n        this._listenScroll();\n        this.load();\n    }\n\n    _createClass(JuLazyLoad, [{\n        key: \"_isOnViewPort\",\n        value: function _isOnViewPort(ele) {\n            return this._isOnVerticalViewPort(ele) && this._isOnHorizontalViewPort(ele);\n        }\n    }, {\n        key: \"_isOnVerticalViewPort\",\n        value: function _isOnVerticalViewPort(ele) {\n            var rect = ele.getBoundingClientRect();\n            return rect.top >= 0 && rect.top <= this._viewPortHeight;\n        }\n    }, {\n        key: \"_isOnHorizontalViewPort\",\n        value: function _isOnHorizontalViewPort(ele) {\n            var rect = ele.getBoundingClientRect();\n            return rect.left >= 0 && rect.left <= this._viewPortWidth;\n        }\n    }, {\n        key: \"_initOnload\",\n        value: function _initOnload() {\n            var imgs = this._images;\n            for (var i = 0; i < imgs.length; i++) {\n                imgs[i].style.background = \"#eee\";\n                imgs[i].src = this._preload;\n            }\n        }\n    }, {\n        key: \"_listenScroll\",\n        value: function _listenScroll() {\n            var self = this;\n            window.addEventListener('scroll', function () {\n                self.load();\n            }, false);\n        }\n    }, {\n        key: \"load\",\n        value: function load() {\n            var imgs = this._images;\n            for (var i = 0; i < imgs.length; i++) {\n                var img = imgs[i];\n                if (!img.loaded && this._isOnViewPort(img)) {\n                    var url = img.getAttribute(this._lazyMark);\n                    img.src = url;\n                    img.loaded = true;\n                }\n            }\n        }\n    }]);\n\n    return JuLazyLoad;\n}();"],"file":"ju-lazy-load.js","sourceRoot":"/source/"}